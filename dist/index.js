"use strict";var H=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var F=Object.prototype.hasOwnProperty;var j=(r,e)=>{for(var t in e)H(r,t,{get:e[t],enumerable:!0})},N=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of g(e))!F.call(r,a)&&a!==t&&H(r,a,{get:()=>e[a],enumerable:!(o=O(e,a))||o.enumerable});return r};var D=r=>N(H({},"__esModule",{value:!0}),r);var P={};j(P,{Immuter:()=>E});module.exports=D(P);var c=class{constructor(e){this.next=e}handleNext(e,t){return this.next?this.next.handle(e,t):e}};var n=class{static check(e){let t=Reflect.apply(Object.prototype.toString,e,[]);return t.slice(t.indexOf(" ")+1,t.indexOf("]")).toLowerCase()}static isDate(e){return this.check(e)==="date"}static isObject(e){return this.check(e)==="object"}static isArray(e){return Array.isArray(e)}static isMap(e){return this.check(e)==="map"}static isSet(e){return this.check(e)==="set"}};var f=class extends c{handle(e,t){return n.isArray(e)?this.createCloneOf(e,t):this.handleNext(e,t)}createCloneOf(e,t){return e.map(t)}};var x=class extends c{handle(e,t){return n.isDate(e)?new Date(e):this.handleNext(e,t)}};var u=class{static execute(e,t){return this.performClone(e,t)}static performClone(e,t){let o=this.createCloneOf(e),a=this.propertyDescriptorsOf(e);for(let l of Reflect.ownKeys(a))this.isEligibleToAssign(a,l)&&(o[l]=t(Reflect.get(o,l)));return o}static createCloneOf(e){return Object.create(this.prototypeOf(e),this.propertyDescriptorsOf(e))}static prototypeOf(e){return Object.getPrototypeOf(e)}static propertyDescriptorsOf(e){return Object.getOwnPropertyDescriptors(e)}static isEligibleToAssign(e,t){return e[String(t)]&&Reflect.has(e[String(t)],"value")}};var h=class extends c{handle(e,t){return n.isObject(e)?u.execute(e,t):this.handleNext(e,t)}};var d=class extends c{handle(e,t){return n.isMap(e)?this.createCloneOf(e,t):this.handleNext(e,t)}createCloneOf(e,t){let o=new Map(e);return e.forEach((a,l)=>o.set(l,t(a))),o}};var k=class extends c{handle(e,t){return n.isSet(e)?this.createCloneOf(e,t):this.handleNext(e,t)}createCloneOf(e,t){let o=new Set(e);return e.forEach(a=>o.add(t(a))),o}};var i=class{static execute(e){if(!this.recursivelyHandler){let t=new h,o=new f(t),a=new d(o),l=new k(a),B=new x(l);this.recursivelyHandler=B}return this.recursivelyHandler.handle(e,this.execute.bind(this))}};var s=class{constructor(e){this.next=e}handleNext(e,t){return this.next?this.next.handle(e,t):e}freeze(e){return Object.freeze(e)}};var C=class extends s{handle(e,t){return n.isArray(e)?this.freeze(this.createCloneOf(i.execute(e),t)):this.handleNext(e,t)}createCloneOf(e,t){return e.map(t)}};var m=class extends Error{constructor(){super("Cannot assign to immutable Map"),this.name="CannotAssignToImmutableMapError"}};var b=class extends s{handle(e,t){return n.isMap(e)?this.freezeMap(e):this.handleNext(e,t)}freezeMap(e){return e.set=this.throwError,e.delete=this.throwError,e.clear=this.throwError,this.freeze(e)}throwError(){throw new m}};var S=class extends s{handle(e,t){return n.isObject(e)?this.freeze(u.execute(i.execute(e),t)):this.handleNext(e,t)}};var w=class extends Error{constructor(){super("Cannot assign to immutable Set"),this.name="CannotAssignToImmutableSetError"}};var y=class extends s{handle(e,t){return n.isSet(e)?this.freezeSet(e):this.handleNext(e,t)}freezeSet(e){return e.add=this.throwError,e.delete=this.throwError,e.clear=this.throwError,this.freeze(e)}throwError(){throw new w}};var T=class extends s{handle(e,t){return n.isDate(e)?this.freeze(i.execute(e)):this.handleNext(e,t)}};var v=class{static execute(e){if(!this.recursivelyHandler){let t=new y,o=new b(t),a=new S(o),l=new C(a),B=new T(l);this.recursivelyHandler=B}return this.recursivelyHandler.handle(e,this.execute.bind(this))}};var z=class{static execute(e,t){t(e)}};var p=class p{static get not(){return{freeze:this.freeze(!1)}}static freeze(e){return this.config.freeze=e,{clone:this.clone.bind(this),produce:this.produce.bind(this)}}static clone(e){let t=i.execute(e);return this.execute(t)}static execute(e){let t=this.freezeIfNecessary(e);return p.resetConfig(),t}static freezeIfNecessary(e){return p.config.freeze?v.execute(e):e}static resetConfig(){this.config.freeze=!0}static produce(e,t){let o=i.execute(e);return z.execute(o,t),this.execute(o)}};p.config={freeze:!0};var E=p;0&&(module.exports={Immuter});
//# sourceMappingURL=index.js.map